{
    "class": "webWidget",
    "name": "Autocomplete",
    "defaultsForOfferTemplate": {
        "description": "Insert or activate existing INPUT with autocomplete.",
        "data": {
            "location": "autocomplete"
        }
    },
    "fields": [
        {
            "id": "inputSelector",
            "name": "Source Input Selector",
            "group": "sourceInput",
            "type": "text",
            "defaultValue": "#persoo-autocomplele-1__input"
        },
        {
            "id": "formSelector",
            "name": "Form Selector (form containing Input)",
            "group": "sourceInput",
            "type": "text",
            "defaultValue": "#persoo-autocomplele-1__form"
        },
        {
            "id": "searchLink",
            "name": "Search Link (with $query)",
            "group": "sourceInput",
            "type": "text",
            "defaultValue": "/searchResults?q=$query"
        },

        {
            "id": "datasetsCount",
            "name": "Datasets Count",
            "group": "options",
            "type": "number",
            "defaultValue": 2
        },
        {
            "id": "minChars",
            "name": "Minimum Characters in Query to display autocomplete",
            "group": "options",
            "type": "number",
            "defaultValue": 1,
            "condition": {
                "fieldID": "hidden",
                "operator": "==",
                "fieldValue": "true"
            }
        },
        {
            "id": "requestThrottlingInMs",
            "name": "Request Throttling in ms",
            "group": "options",
            "type": "number",
            "defaultValue": 200,
            "condition": {
                "fieldID": "hidden",
                "operator": "==",
                "fieldValue": "true"
            }
        },
        {
            "id": "openOnFocus",
            "name": "Open On Focus",
            "group": "options",
            "type": "checkbox",
            "defaultValue": true
        },
        {
            "id": "closeOnBlur",
            "name": "Close On Blur (false is usefull for debug)",
            "group": "options",
            "type": "checkbox",
            "defaultValue": false
        },


        {
            "id": "dataset1Algorithm",
            "name": "Persoo algorithm ID",
            "group": "dataset1",
            "type": "text",
            "defaultValue": "f645379a715b4b189eff1c14805e9f6e",
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "dataset1MaxResultsCount",
            "name": "Max Results Count",
            "group": "dataset1",
            "type": "number",
            "defaultValue": 5,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "dataset1ShowWhenEmptyResults",
            "name": "Show Dataset with Empty Results",
            "group": "dataset1",
            "type": "checkbox",
            "defaultValue": false,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "section_templates_dataset1",
            "name": "Templates",
            "group": "dataset1",
            "type": "section"
        },
        {
            "id": "dataset1HeaderTemplate",
            "name": "Header (string with $query, $count placeholders)",
            "group": "dataset1",
            "type": "text",
            "defaultValue": "PRODUCTS matching '$query'",
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "dataset1HitTemplate",
            "name": "Custom Hit (javascript function)",
            "group": "dataset1",
            "type": "javascript",
            "defaultValue": "",
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
             "id": "dataset1FooterTemplate",
             "name": "Footer (string with $query, $count placeholders)",
             "group": "dataset1",
             "type": "text",
             "defaultValue": "Found $count products matching '$query'",
             "condition": {
                 "fieldID": "datasetsCount",
                 "operator": ">=",
                 "fieldValue": 1
             }
        },
        {
             "id": "dataset1EmptyTemplate",
             "name": "Empty (string with $query placeholders)",
             "group": "dataset1",
             "type": "text",
             "defaultValue": "Nothing found for '$query'",
             "condition": {
                 "operator": "and",
                 "children": [
                     {
                         "fieldID": "datasetsCount",
                         "operator": ">=",
                         "fieldValue": 1
                     },
                     {
                         "fieldID": "dataset1ShowWhenEmptyResults",
                         "operator": "==",
                         "fieldValue": true
                     }
                 ]
             }
        },
        {
            "id": "dataset2Algorithm",
            "name": "Persoo algorithm ID",
            "group": "dataset2",
            "type": "text",
            "defaultValue": "f645379a715b4b189eff1c14805e9f6e",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2MaxResultsCount",
            "name": "Maximum Results Count",
            "group": "dataset2",
            "type": "number",
            "defaultValue": 5,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 2
            }
        },
        {
            "id": "dataset2ShowWhenEmptyResults",
            "name": "Show Dataset with Empty Results",
            "group": "dataset2",
            "type": "checkbox",
            "defaultValue": false,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 2
            }
        },

        {
            "id": "section_templates_dataset2",
            "name": "Templates",
            "group": "dataset2",
            "type": "section",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2HeaderTemplate",
            "name": "Header (string with $query, $count placeholders)",
            "group": "dataset2",
            "type": "text",
            "defaultValue": "CATEGORIES matching '$query'",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2HitTemplate",
            "name": "Custom Hit (javascript function)",
            "group": "dataset2",
            "type": "javascript",
            "defaultValue": "function (data) {\n    return data.hit.title ? data.highlightQuery(data.hit.title) : '';\n}",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2FooterTemplate",
            "name": "Footer (string with $query, $count placeholders)",
            "group": "dataset2",
            "type": "text",
            "defaultValue": "",
            "condition": {
              "fieldID": "datasetsCount",
              "operator": ">=",
              "fieldValue": 2
            }
        },
        {
             "id": "dataset2EmptyTemplate",
             "name": "Empty template (string with $query placeholders)",
             "group": "dataset2",
             "type": "text",
             "defaultValue": "",
             "condition": {
                 "operator": "and",
                 "children": [
                     {
                         "fieldID": "datasetsCount",
                         "operator": ">=",
                         "fieldValue": 2
                     },
                     {
                         "fieldID": "dataset2ShowWhenEmptyResults",
                         "operator": "==",
                         "fieldValue": true
                     }
                 ]
             }
        },

        {
            "id": "autocompleteID",
            "name": "Autocomplete Dropdown Element ID (usefull for CSS rules)",
            "group": "design",
            "type": "text",
            "defaultValue": "autocomplete1"
        },
        {
            "id": "section_dropdowpPositionAndWidth",
            "name": "Dropdown Position and Width",
            "group": "design",
            "type": "section"
        },
        {
            "id": "offsetLeft",
            "name": "Dropdown Offset Left (in px relative to source input)",
            "group": "design",
            "type": "number",
            "defaultValue": 0
        },
        {
            "id": "offsetTop",
            "name": "Dropdown Offset Top (in px relative to source input)",
            "group": "design",
            "type": "number",
            "defaultValue": 4
        },
        {
            "id": "useInputWidth",
            "name": "Set Dropdown Width to Input Width by inline CSS (use custom CSS to change Dropdown Width)",
            "group": "design",
            "type": "checkbox",
            "defaultValue": false
        },

        {
            "id": "section_htmlLayout",
            "name": "Search Bar Template",
            "group": "design",
            "type": "section"
        },
        {
            "id": "searchBarTemplate",
            "name": "Search Bar Template as HTML",
            "group": "design",
            "type": "html",
            "defaultValue": "To be filled from default values."
        },
        {
            "id": "section_customCSS",
            "name": "Custom CSS",
            "group": "design",
            "type": "section"
        },
        {
            "id": "customCSS",
            "name": "Custom CSS",
            "group": "design",
            "type": "css",
            "defaultValue": "/* your own css rules */"
        },
        {
            "id": "section_customJS",
            "name": "Custom Javascript",
            "group": "design",
            "type": "section"
        },
        {
            "id": "customJS",
            "name": "Custom Javascript",
            "group": "design",
            "type": "javascript",
            "defaultValue": "/* your own javascript */"
        }
    ],
    "groups": [
        {
            "id": "sourceInput",
            "name": "Source Input Field"
        },
        {
            "id": "dataset1",
            "name": "Products (Dataset 1)"
        },
        {
            "id": "dataset2",
            "name": "Categories, Brands (Dataset 2)"
        },
        {
            "id": "options",
            "name": "Autocomplete Options"
        },
        {
            "id": "design",
            "name": "Layout HTML & CSS Styles"
        }
    ],
    "template": "Note: this will be replaced by content of template.html",
    "minScenariosCount": 0
}
