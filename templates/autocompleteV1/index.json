{
    "class": "webWidget",
    "name": "Autocomplete",
    "defaultsForOfferTemplate": {
        "description": "Insert Search Box with Autocomplete and Product Suggestions.",
        "releaseStage": "beta",
        "data": {
            "name": "Autocomplete",
            "location": "autocomplete"
        }
    },
    "fields": [
        {
            "id": "inputSelector",
            "name": "Source Input Selector",
            "group": "options",
            "type": "text",
            "defaultValue": "#persoo-autocomplele-1__input"
        },
        {
            "id": "formSelector",
            "name": "Form Selector (form containing Input)",
            "group": "options",
            "type": "text",
            "defaultValue": "#persoo-autocomplele-1__form"
        },
        {
            "id": "searchLink",
            "name": "Search Link where to send search request (with $query)",
            "group": "options",
            "type": "text",
            "defaultValue": "/searchResults?q=$query"
        },

        {
            "id": "datasetsCount",
            "name": "Datasets Count",
            "group": "options",
            "type": "select",
            "options": [
                {
                    "label": "1 (Products only)",
                    "value": 1
                },
                {
                    "label": "2 (Products and Categories/Brands)",
                    "value": 2
                }
            ],
            "defaultValue": 2
        },
        {
            "id": "minChars",
            "name": "Minimum Characters in Query to display autocomplete",
            "group": "options",
            "type": "number",
            "defaultValue": 1,
            "condition": {
                "fieldID": "hidden",
                "operator": "==",
                "fieldValue": "true"
            }
        },
        {
            "id": "requestThrottlingInMs",
            "name": "Request Throttling in ms",
            "group": "options",
            "type": "number",
            "defaultValue": 200,
            "condition": {
                "fieldID": "hidden",
                "operator": "==",
                "fieldValue": "true"
            }
        },
        {
            "id": "openOnFocus",
            "name": "Open On Focus",
            "group": "options",
            "type": "checkbox",
            "defaultValue": true
        },
        {
            "id": "closeOnBlur",
            "name": "Close On Blur (false is usefull for debug)",
            "group": "options",
            "type": "checkbox",
            "defaultValue": false
        },


        {
            "id": "dataset1Algorithm",
            "name": "Persoo algorithm ID",
            "group": "dataset1",
            "type": "text",
            "defaultValue": "persooProductsFulltextSearch",
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "dataset1MaxResultsCount",
            "name": "Max Results Count",
            "group": "dataset1",
            "type": "number",
            "defaultValue": 6,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "dataset1ShowWhenEmptyResults",
            "name": "Show Dataset with Empty Results",
            "group": "dataset1",
            "type": "checkbox",
            "defaultValue": false,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "section_templates_dataset1",
            "name": "Templates",
            "group": "dataset1",
            "type": "section"
        },
        {
            "id": "dataset1HeaderTemplate",
            "name": "Header (available variables: query, count, isEmpty)",
            "group": "dataset1",
            "type": "text",
            "defaultValue": "PRODUCTS matching '<%= query %>'",
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
            "id": "dataset1ItemTemplate",
            "name": "Item (available variables: query, item, highlightQuery(str))",
            "group": "dataset1",
            "type": "html",
            "defaultValue": "<a href=\"<%= item.link %>\">\n    <div class=\"persoo-autocompleteDataset__items__item__img\">\n        <img src=\"<%= item.imageLink %>\">\n    </div>\n    <div class=\"persoo-autocompleteDataset__items__item__title\">\n        <%= highlightQuery(item.title) %>\n    </div>\n    <div class=\"persoo-autocompleteDataset__items__item__price\">\n        <% if (item.priceOriginal) { %>\n            <span class=\"persoo-autocompleteDataset__items__item__price__original\">\n                <%= item.priceOriginal %>&nbsp;Kč</span>\n        <% } %>\n        <span class=\"persoo-autocompleteDataset__items__item__price__current\">\n            <%= item.price %>&nbsp;Kč</span>\n    </div>\n</a>",
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 1
            }
        },
        {
             "id": "dataset1FooterTemplate",
             "name": "Footer (available variables: query, count, isEmpty)",
             "group": "dataset1",
             "type": "text",
             "defaultValue": "Found <%= count %> products matching '<%= query %>'",
             "condition": {
                 "fieldID": "datasetsCount",
                 "operator": ">=",
                 "fieldValue": 1
             }
        },
        {
             "id": "dataset1EmptyTemplate",
             "name": "Empty (available variables: query, count, isEmpty)",
             "group": "dataset1",
             "type": "text",
             "defaultValue": "Nothing found for '<%= query %>'",
             "condition": {
                 "operator": "and",
                 "children": [
                     {
                         "fieldID": "datasetsCount",
                         "operator": ">=",
                         "fieldValue": 1
                     },
                     {
                         "fieldID": "dataset1ShowWhenEmptyResults",
                         "operator": "==",
                         "fieldValue": true
                     }
                 ]
             }
        },
        {
            "id": "dataset2Algorithm",
            "name": "Persoo algorithm ID",
            "group": "dataset2",
            "type": "text",
            "defaultValue": "persooProductsFulltextSearch",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2MaxResultsCount",
            "name": "Maximum Results Count",
            "group": "dataset2",
            "type": "number",
            "defaultValue": 5,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 2
            }
        },
        {
            "id": "dataset2ShowWhenEmptyResults",
            "name": "Show Dataset with Empty Results",
            "group": "dataset2",
            "type": "checkbox",
            "defaultValue": false,
            "condition": {
                "fieldID": "datasetsCount",
                "operator": ">=",
                "fieldValue": 2
            }
        },

        {
            "id": "section_templates_dataset2",
            "name": "Templates",
            "group": "dataset2",
            "type": "section",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2HeaderTemplate",
            "name": "Header (available variables: query, count, isEmpty)",
            "group": "dataset2",
            "type": "text",
            "defaultValue": "CATEGORIES",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2ItemTemplate",
            "name": "Item (available variables: query, item, highlightQuery(str))",
            "group": "dataset2",
            "type": "html",
            "defaultValue": "<%= item.title ? highlightQuery(item.title) : '' %>",
            "condition": {
             "fieldID": "datasetsCount",
             "operator": ">=",
             "fieldValue": 2
            }
        },
        {
            "id": "dataset2FooterTemplate",
            "name": "Footer (available variables: query, count, isEmpty)",
            "group": "dataset2",
            "type": "text",
            "defaultValue": "",
            "condition": {
              "fieldID": "datasetsCount",
              "operator": ">=",
              "fieldValue": 2
            }
        },
        {
             "id": "dataset2EmptyTemplate",
             "name": "Empty template (available variables: query, count, isEmpty)",
             "group": "dataset2",
             "type": "text",
             "defaultValue": "",
             "condition": {
                 "operator": "and",
                 "children": [
                     {
                         "fieldID": "datasetsCount",
                         "operator": ">=",
                         "fieldValue": 2
                     },
                     {
                         "fieldID": "dataset2ShowWhenEmptyResults",
                         "operator": "==",
                         "fieldValue": true
                     }
                 ]
             }
        },

        {
            "id": "autocompleteID",
            "name": "Autocomplete Dropdown Element ID (usefull for CSS rules)",
            "group": "design",
            "type": "text",
            "defaultValue": "autocomplete1"
        },
        {
            "id": "section_htmlLayout",
            "name": "Search Bar Template",
            "group": "design",
            "type": "section"
        },
        {
            "id": "searchBarTemplate",
            "name": "Search Bar Template as HTML",
            "group": "design",
            "type": "html",
            "defaultValue": "To be filled from default values."
        },
        {
            "id": "section_customCSS",
            "name": "Custom CSS",
            "group": "design",
            "type": "section"
        },
        {
            "id": "customCSS",
            "name": "Custom CSS",
            "group": "design",
            "type": "css",
            "defaultValue": "/* your own css rules */"
        },
        {
            "id": "customClassNamesJSON",
            "name": "Custom Class Names",
            "group": "design",
            "type": "json",
            "defaultValue": {
                "dropdown": {
                    "root": ""
                },
                "dataset1": {
                    "root": "",
                    "items": "",
                    "item": "",
                    "header": "",
                    "footer": "",
                    "empty": ""
                },
                "dataset2": {
                    "root": "",
                    "items": "",
                    "item": "",
                    "header": "",
                    "footer": "",
                    "empty": ""
                }
            }
        },
        {
            "id": "section_customJS",
            "name": "Custom Javascript",
            "group": "design",
            "type": "section"
        },
        {
            "id": "customJS",
            "name": "Custom Javascript",
            "group": "design",
            "type": "javascript",
            "defaultValue": "/* your own javascript */"
        }
    ],
    "groups": [
        {
            "id": "dataset1",
            "name": "Products (Dataset 1)"
        },
        {
            "id": "dataset2",
            "name": "Categories, Brands (Dataset 2)"
        },
        {
            "id": "options",
            "name": "Autocomplete Options & Source Input Field"
        },
        {
            "id": "design",
            "name": "Layout HTML & CSS Styles"
        }
    ],
    "template": "Note: this will be replaced by content of template.html",
    "minScenariosCount": 0
}
